{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4"><i class="fas fa-robot me-2"></i>Notificaciones Automáticas</h2>

<table class="table table-bordered table-hover">
    <thead class="table-light">
    <tr>
        <th>Tipo</th>
        <th>Mensaje</th>
        <th>Estudiante</th>
        <th>Fecha Envío</th> 
        <th>Estado</th>
    </tr>
</thead>
<tbody>
    {% for notif in notificaciones %}
    <tr>
        <td>{{ notif.tipo|capfirst }}</td>
        <td>{{ notif.mensaje|truncatewords:12 }}</td>
        <td>{{ notif.estudiante.nombre_completo }}</td>
        <td>
            {% if notif.fecha_envio %}
                {{ notif.fecha_envio|date:"d/m/Y H:i" }}
            {% else %}
                <span class="text-muted">No registrada</span>
            {% endif %}
        </td>
        <td>
            <span class="badge {% if notif.estado == 'enviada' %}bg-success{% elif notif.estado == 'pendiente' %}bg-warning{% else %}bg-danger{% endif %}">
                {{ notif.estado|capfirst }}
            </span>
        </td>
    </tr>
    {% endfor %}
</tbody>
</table>

<a href="{% url 'core:dashboard' %}" class="btn btn-outline-primary mt-3">
    ← Volver al Dashboard
</a>
{% endblock %}
